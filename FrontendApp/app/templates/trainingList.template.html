<div class="clearfix">
    <div class="buttons-block">
        <button ng-if="isAdmin()" class="btn btn-primary btn-md">Создать тренинг</button>
    </div>
</div>

<div class="jumbotron">
    <h3>Фильтрация</h3>
    <form>
        <div class="row">
            <div class="form-group col-sm-6">
                <label for="name">Название:</label>
                <input ng-model="$ctrl.searchForm.name" type="text" id="name" class="form-control">
            </div>
            <div class="form-group col-sm-6 row">
                <div class="col-xs-12">
                    <label>Дата проведения</label>
                </div>
                <div class="col-xs-6">
                    <label for="min-date">$С:</label>
                    <input ng-model="$ctrl.searchForm.minStartDate" type="number" id="min-date" class="form-control">
                </div>
                <div class="col-xs-6">
                    <label for="max-date">$До:</label>
                    <input ng-model="$ctrl.searchForm.maxStartDate" type="number" id="max-date" class="form-control">
                </div>
            </div>
            <div class="form-group col-sm-6">
                <label for="trainer">Тренер</label>
                <input ng-model="$ctrl.searchForm.trainer" type="text" id="trainer" class="form-control">
            </div>
            <div class="form-group col-sm-6">
                <label for="location">Тренер</label>
                <input ng-model="$ctrl.searchForm.location" type="text" id="location" class="form-control">
            </div>
            <div class="form-group col-sm-6">
                <label for="types">Категории:</label>
                <input type="text"
                       class="form-control"
                       id="types"
                       name="types"
                       ng-model="$ctrl.typesInput"
                       uib-typeahead="type.name for type in $ctrl.types | filter:$viewValue | limitTo:8"
                       typeahead-on-select="$ctrl.selectType($item, $model, $label, $event)"
                       autocomplete="off">
                <p><span class="tag" ng-repeat="type in $ctrl.searchForm.types">{{ type.name }}<span class="glyphicon glyphicon-remove" ng-click="$ctrl.removeType(type)"></span></span></p>
            </div>
        </div>
        <div class="form-group">
            <button type="submit" ng-click="$ctrl.applySearch()" class="btn btn-default">Поиск</button>
        </div>
    </form>
</div>

<div class="alert alert-danger" ng-show="$ctrl.errorMessage">
    {{ $ctrl.errorMessage }}
</div>
<div class="alert alert-info" ng-show="$ctrl.trainingList.length == 0">
    Тренинги отсутствуют
</div>

<div ng-if="$ctrl.totalItems > $ctrl.itemsPerPage">
    <tp-pagination current-page="$ctrl.currentPage"
                   items-per-page="$ctrl.itemsPerPage"
                   total-items="$ctrl.totalItems"
                   on-page-changed="$ctrl.pageChanged(currentPage)"
    ></tp-pagination>
</div>

<div class="clearfix">
    <div class="well clearfix" ng-repeat="training in $ctrl.trainingList">
        <h3><a ui-sref="training({ trainingId : training.id, prevState : $ctrl.getStateInfo() })">{{ training.name }}</a></h3>
        <p><span class="tag" ng-repeat="type in product.types">{{ type.name }}</span></p>
        <p>Старт: {{ training.startDate }}</p>
        <p>Окончание: {{ training.endDate }}</p>
        <p>{{ training.description }}</p>
        <div class="buttons-block">
            <a class="btn btn-sm btn-primary" ng-if="$ctrl.isLogged()">Подать заявку</a>
        </div>
    </div>
</div>

<div ng-if="$ctrl.totalItems > $ctrl.itemsPerPage">
    <tp-pagination current-page="$ctrl.currentPage"
                   items-per-page="$ctrl.itemsPerPage"
                   total-items="$ctrl.totalItems"
                   on-page-changed="$ctrl.pageChanged(currentPage)"
    ></tp-pagination>
</div>